## 正则表达式语法

### 字符

#### 元字符

特殊字符，用来表示特殊语义的字符

#### 单字符

**一对一的映射（匹配）关系**

| 字符含义   | 正则表达式中的表示方式 | 辅助记忆                                   |
| ---------- | ---------------------- | ------------------------------------------ |
| 换行       | \n                     | **n**ew line                               |
| 换页       | \f                     | **f**orm feed(换页)                        |
| 回车       | \r                     | **r**eturn                                 |
| 空白       | \s                     | **s**pace                                  |
| 制表符     | \t                     | **t**ab                                    |
| 回退符     | [\b]                   | **b**ackspace（看键盘） 加上[]避免和\b重复 |
| 垂直制表符 | \v                     | **v**ertical  tab                          |

#### 用于同时匹配多个字符串的简便正则表达式

**一对多的匹配**

| 匹配的区间                           | 正则中的表示方式 | 辅助记忆  |
| ------------------------------------ | ---------------- | --------- |
| 除了**换行符**之外的所有的任何字符   | .                |           |
| 单个数字[0-9]                        | \d               | **d**ight |
| 除[0-9]                              | \D               | (\d取反)  |
| 包括下划线在内的单个字符[A-Za-z0-9_] | \w               | **w**ord  |
| 非单字符                             | \W               | (\w取反)  |
| 匹配 空格、制表符、换页符、换行符    | \s               | **s**pace |
| 非空白字符                           | \S               | (\s取反)  |

### 重复

重复出现的次数

| 重复次数       | 正则中的表达方式 |
| -------------- | ---------------- |
| 0或1           | ？               |
| >=0            | *                |
| >=1            | +                |
| 特定次数n      | {n}              |
| 介于min和max次 | {min,max}        |
| 至少min次      | {min,}           |
| 最多max次      | {0,max}          |

### 位置边界

限定查找的以什么开头以什么结尾 

#### 单词边界

> \b   ---boundary   限定**单词**开头或结尾的**字母**必须是什么
>
> \B   --- \b取反

:chestnut:例子

```
// 源字符串
The cat scattered his food all over the room.
// 正则 及结果
/cat/ ===>  cat 和  scattered
/\bcat\b/  ===> cat
```

#### 字符串边界

> ^ ---- **句子**的开头必须是什么**字符**（单个）
>
> $ ---- 句子的结尾必须是什么**字符**(单个)

:chestnut:例子

```
// 源字符串
i am orix  balabalas000.....
// 正则表达式
/^i am orix$/==> i am orix
```

### 分组

> 将`(`和`)`元字符所包含的正则表达式分为一组 

:chestnut: 配合重复使用

```
// 源字符串
regregregregreg
// 正则
(reg){5}
```

#### 分组捕获后的引用

> **通过 $n 复用 捕获后的对应的 第 n组的范围** 
>
> 注意 $0 是所有匹配到的

**:chestnut:**例子

```js
/([a-z]{2})(\d{2})/.test("xyz123") //yz12
RegExp.$1 ===> yz
RegExp.$2 ===> 12
```

#### 分组 非捕获（节省内存）

>语法： (?:regex)   加上?:     ?本身不被消费  :引用
>
>匹配结果不变 只是对应分组不再被捕获

:chestnut: 例子

```js
/([a-z]{2})(?:\d{2})/.test("xyz123") //yz12 
RegExp.$1 ===> yz
RegExp.$2 ===> 空字符串
```

### 断言查找

> 要查找的  必须以 那些字符  开头或那些字符结束
>
> 和字符串边界的区别是  断言的条件是多个字符  字符串边界是单个

#### 正向先行断言(知道后面拿前面)

> 匹配 某段(个)字符串  后面必须跟随指定的字符串
>
> 语法:   (?=reg)

:chestnut: 例子

```js
// 源字符串
The fat cat sat on the mat
// 正则
\w+(?=\sfat) ===>结果:The
正则含义:匹配 后面跟着 空字符串+fat的word  
```

#### 正向后行断言(知道前面拿后面)

> 匹配某段(个)字符串  前面必须有指定字符串
>
> 语法: (?<=...)

:chestnut: 例子

```js
// 源字符串
The fat cat sat on the mat
// 正则
(?<=(T|t)he\s)\w+ ===>结果：fat mat
```

#### 负向先行断言(知道后面不是啥拿前面)

> 匹配某段(个)字符串   后面不能跟着 指定的字符串
>
> 语法：(?!reg)
:chestnut: 例子

```js
// 源字符串
The fat cat sat on the mat
// 正则
\w+(?!\sfat) ===>结果:7个结果 Th  fat cat sat on the mat
正则含义:匹配 后面不跟着 空字符串+fat的word
(T|t)he(?!\sfat)===> 结果:  the
正则含义:匹配 后面不跟着 空字符串+fat 的 The 或the
```

#### 负向后行断言(知道前面不是啥拿后面)

>匹配某段(个)字符串   前面不能是  指定的字符串
>
>语法：(?<!reg)

:chestnut: 例子

```js
// 源字符串
The fat cat sat on the mat
// 正则
(?<!(T|t)he\s)(cat)===>结果:fat后面的cat
正则含义:匹配前面不上 the或者The 的 cat
```

### 逻辑处理

#### 逻辑处理

| 逻辑关系 | 表达方式                      |
| -------- | ----------------------------- |
| 与       | (reg1reg2)                    |
| 非       | [^regex] 和 !                 |
| 或       | \| 或[reg1reg2]或(reg1\|reg2) |

#### 特殊的点

##### []里的-(连字符)

如果连字符在括号第一位 表示连字符本身  `[-.]`

如果连字符在中间  表示 从...到... `[A-Z]`

### 标志

| 标志作用   | 正则表达式 |
| ---------- | ---------- |
| 多行模式   | m          |
| 忽略大小写 | i          |
| 全局模式   | g          |

### 贪婪和惰性模式

#### 贪婪模式

**在贪婪模式下 量词都会尽可能地重复多次**

##### 执行过程

- 先执行量词前的部分  
- 量词部分 尽可能多的重复 直到结束
- 如果量词后的不匹配 则进行 **回溯（倒着反取回来）**
- 遇到和量词后匹配的部分 则停止

#### 惰性模式

**量词会尽可能的不重复**

##### 执行过程

- 执行量词前的部分
- 执行量词的最低次数 碰到结束的直接结束
- **结合量词后的部分 一点点往后推移**
- 遇到量词后的部分匹配 则结束

## js中的正则相关的方法

| 方法           | 作用                                                    | 返回值                   | 备注 |
| -------------- | ------------------------------------------------------- | ------------------------ | ---- |
| reg.test(str)  | 测试str是否包含符合正则表达式的内容                     | 布尔值                   |      |
| str.match(reg) | 返回str中符合正则表达式的**第一个序列**                 | 匹配到的内容             |      |
| reg.exec(str)  | 返回str中符合正则表达式的全部结果，并把结果作为分组返回 | 数组（匹配到的内容分组） |      |

### str.split(分隔符/正则)

**分割字符串为数组**

##### 保留分隔符的方法---给匹配的内容分组

```js
let s = 
"Hello,My name is Vincent. Nice to Meet you!What's your name? Haha."
let result = s.split(/([.,!?]+)/)
// result  ["Hello", ",", "My name is Vincent", ".", " Nice to Meet you", "!", "What's your name", "?", " Haha", ".", ""]
```

### str.replace(reg,replace|function)

#### 参数二 为replace

> 参考捕获组里面的引用 $n

```js
var s = "Hello,My name is orix."
var result = s.replace(/([aeiou])/g,"$1$1")
//"Heelloo,My naamee iis ooriix."
```

#### 参数而 为 function

> function 默认接受的参数为 （总匹配的内容，分组1，分组2...）

```js
var s = "Hello,My name is OriX. What is your name?"
var newStr = s.replace(/\b\w{4}\b/g,replacer)
console.log('newStr',newStr)
function replacer(match) {
    console.log(match);
    return match.toUpperCase();
}
/*
name
What
your
name
newStr---Hello,My NAME is Vincent. WHAT is YOUR NAME?
*/
```

